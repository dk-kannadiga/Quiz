<!DOCTYPE html>
<html lang="kn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Anek+Kannada:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Baloo+Tamma:wght@400;700&display=swap" rel="stylesheet">
<title>‡≤ï‡≤®‡≥ç‡≤®‡≤° ‡≤ï‡≥ç‡≤µ‡≤ø‡≤ú‡≥ç ‡≤ú‡≤ó‡≤§‡≥ç‡≤§‡≥Å</title>
<style>
/* your existing CSS exactly as before */
</style>
</head>
<body>
<div class="container">
    <!-- your existing HTML pages remain the same -->
</div>

<!-- Alert Modal -->
<div class="modal" id="alertModal">
    <div class="modal-content">
        <p id="alertMessage">‡≤∏‡≤≤‡≥ç‡≤≤‡≤ø‡≤∏‡≥Å‡≤µ ‡≤Æ‡≥ä‡≤¶‡≤≤‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤∞‡≤ø‡≤∏‡≤ø</p>
        <button class="btn" onclick="closeAlert()">‡≤∏‡≤∞‡≤ø</button>
    </div>
</div>

<script>
/* #############################
   ONLY BELOW PART IS MODIFIED
   ############################# */

let quizConfig = {
    bannerUrl: 'https://dk-kannadiga.github.io/Quiz/37c62ba0-801e-5cbb-9817-26e7c0828519.jpg',
    includeAddress: false,
    timerSeconds: 10,
    endDateTime: '‡≤°‡≤ø‡≤∏‡≥Ü‡≤Ç‡≤¨‡≤∞‡≥ç 31, 2025, 10:00 PM',
    webhookUrl: 'https://script.google.com/macros/s/AKfycbwyxasu0hQg9J-QUJCyb3oWMKumuDTvBslcWNQrmCqlh430MJnpaTHb9W8rQ052HI76Aw/exec',
    questions: [] // üîÑ initially empty ‚Äî will be filled from Google Sheets
};

let currentQuestion = 0;
let userAnswers = [];
let timerInterval;
let currentTimer;
let selectedOption = null;
let userData = {};

// Load config and setup UI
function loadConfig() {
    applyConfig();
}

// Apply banner & field visibility
function applyConfig() {
    document.getElementById('quizBanner').src = quizConfig.bannerUrl;
    document.getElementById('addressField').style.display = 
        quizConfig.includeAddress ? 'block' : 'none';
    document.getElementById('endDateTime').textContent = quizConfig.endDateTime;
    document.getElementById('address').required = quizConfig.includeAddress;
}

// üîΩ NEW FUNCTION ‚Äî fetches questions from Google Sheet
async function loadQuestionsFromSheet() {
    const sheetUrl = 'https://script.google.com/macros/s/AKfycbxdch2VhZr8bMmTAG3Dh-ym9DjXVclc2pV8-KJf9xJkf51z1jJ55SgMZHWkWw4VzDgE1g/exec'; // ‚Üê replace this URL
    try {
        const response = await fetch(sheetUrl);
        const data = await response.json();
        quizConfig.questions = data;
        showPage('quizPage');
    } catch (err) {
        console.error("Error loading questions:", err);
        showAlert("‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤∏‡≤æ‡≤ß‡≥ç‡≤Ø‡≤µ‡≤æ‡≤ó‡≤≤‡≤ø‡≤≤‡≥ç‡≤≤. ‡≤Æ‡≤§‡≥ç‡≤§‡≥Ü ‡≤™‡≥ç‡≤∞‡≤Ø‡≤§‡≥ç‡≤®‡≤ø‡≤∏‡≤ø.");
    }
}

// Page navigation
function showPage(pageId) {
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    document.getElementById(pageId).classList.add('active');
    if (pageId === 'quizPage') {
        showQuestion();
    }
}

// Registration form ‚Üí now loads questions from Sheet
document.getElementById('registrationForm').addEventListener('submit', function(e) {
    e.preventDefault();
    userData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address').value || 'N/A',
        timestamp: new Date().toISOString()
    };
    // üîÑ Instead of showPage('quizPage'), we now fetch from Sheet:
    loadQuestionsFromSheet();
});

/* Rest of your JS remains SAME (showQuestion, timer, submitAnswer, etc.)
   No other changes needed! */
   
function showQuestion() {
    if (currentQuestion >= quizConfig.questions.length) {
        submitQuizResults();
        return;
    }
    const q = quizConfig.questions[currentQuestion];
    document.getElementById('questionNumber').textContent = 
        `${quizConfig.questions.length}‡≤∞‡≤≤‡≥ç‡≤≤‡≤ø ${currentQuestion + 1}‡≤®‡≥á ‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü`;
    document.getElementById('questionText').textContent = q.question;
    const progress = ((currentQuestion + 1) / quizConfig.questions.length) * 100;
    document.getElementById('quizProgress').style.width = progress + '%';

    const container = document.getElementById('optionsContainer');
    container.innerHTML = '';
    selectedOption = null;
    q.options.forEach((option, index) => {
        const div = document.createElement('div');
        div.className = 'option';
        div.innerHTML = `
            <input type="radio" name="option" value="${index}" id="opt${index}">
            <label for="opt${index}" style="cursor:pointer; margin:0;">${option}</label>
        `;
        div.onclick = () => selectOption(index, div);
        container.appendChild(div);
    });
    startTimer();
}

/* ... rest of your functions (selectOption, startTimer, submitAnswer, skipQuestion, etc.)
   remain identical ... */

loadConfig();
</script>
</body>
</html>
